---
import translations from "../i18/index.json";

const locale = "en";  
const t = translations[locale].carousel;
---

<div class=" py-12">
  <div id="text-carousel" class="relative w-full max-w-4xl mx-auto mt-12" data-carousel="manual">
      <!-- Carousel Wrapper -->
      <div class="relative h-80 md:h-96 lg:h-[28rem] flex items-center justify-center overflow-hidden rounded-lg shadow-lg bg-gray-100">
          
          <!-- Slide 1 (Active) -->
          <div class="absolute inset-0 flex flex-row items-center bg-white rounded-lg h-full w-full opacity-100 transition-opacity duration-700 ease-in-out shadow-md" data-carousel-item="active">
              <!-- Image (Left Side) -->
              <div class="w-1/2 h-full">
                  <img src="/logos/banska_bystrica.jpg" alt="Banská Bystrica" class="h-full w-full object-cover rounded-l-lg">
              </div>
              <!-- Text (Right Side) -->
              <div class="w-1/2 flex flex-col justify-center items-start p-8 bg-[#5482DE] text-white rounded-r-lg">
                  <h2 class="text-3xl font-bold">Program rozvoja bývania 2035</h2>
                  <p class="mt-4 text-lg">
                      Pomohli sme vytvoriť Program rozvoja bývania 2035 pre Mesto Banská Bystrica.
                  </p>
                  <a href="#" class="mt-6 text-white underline hover:opacity-80 transition">
                      Zistite viac
                  </a>
              </div>
          </div>

          <!-- Slide 2 -->
          <div class="absolute inset-0 hidden flex flex-row items-center bg-white rounded-lg h-full w-full opacity-0 transition-opacity duration-700 ease-in-out shadow-md" data-carousel-item>
              <!-- Image (Left Side) -->
              <div class="w-1/2 h-full">
                  <img src="/logos/banska_bystrica.jpg" alt="Banská Bystrica" class="h-full w-full object-cover rounded-l-lg">
              </div>
              <!-- Text (Right Side) -->
              <div class="w-1/2 flex flex-col justify-center items-start p-8 bg-[#5482DE] text-white rounded-r-lg">
                  <h2 class="text-3xl font-bold">Druhý projekt</h2>
                  <p class="mt-4 text-lg">
                      Tento projekt sa zameriava na podporu udržateľného rozvoja v meste.
                  </p>
                  <a href="#" class="mt-6 text-white underline hover:opacity-80 transition">
                      Zistite viac
                  </a>
              </div>
          </div>

          <!-- Slide 3 -->
          <div class="absolute inset-0 hidden flex flex-row items-center bg-white rounded-lg h-full w-full opacity-0 transition-opacity duration-700 ease-in-out shadow-md" data-carousel-item>
              <!-- Image (Left Side) -->
              <div class="w-1/2 h-full">
                  <img src="/logos/banska_bystrica.jpg" alt="Banská Bystrica" class="h-full w-full object-cover rounded-l-lg">
              </div>
              <!-- Text (Right Side) -->
              <div class="w-1/2 flex flex-col justify-center items-start p-8 bg-[#5482DE] text-white rounded-r-lg">
                  <h2 class="text-3xl font-bold">Tretí projekt</h2>
                  <p class="mt-4 text-lg">
                      Spájame komunity a podporujeme dialóg pre lepšiu budúcnosť.
                  </p>
                  <a href="#" class="mt-6 text-white underline hover:opacity-80 transition">
                      Zistite viac
                  </a>
              </div>
          </div>
      </div>

      <!-- Slider indicators -->
      <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 flex space-x-2">
          <button type="button" class="w-3 h-3 rounded-full bg-gray-400" data-carousel-slide-to="0"></button>
          <button type="button" class="w-3 h-3 rounded-full bg-gray-400" data-carousel-slide-to="1"></button>
          <button type="button" class="w-3 h-3 rounded-full bg-gray-400" data-carousel-slide-to="2"></button>
      </div>

      <!-- Navigation Arrows (Outside) -->
      <button id="carousel-prev" type="button" class="absolute top-1/2 left-0 transform -translate-y-1/2 z-30 flex items-center justify-center h-12 w-12 bg-gray-800 text-white rounded-full opacity-80 hover:opacity-100 transition duration-300 focus:outline-none">
          ❮
      </button>
      <button id="carousel-next" type="button" class="absolute top-1/2 right-0 transform -translate-y-1/2 z-30 flex items-center justify-center h-12 w-12 bg-gray-800 text-white rounded-full opacity-80 hover:opacity-100 transition duration-300 focus:outline-none">
          ❯
      </button>
  </div>
</div>

<!-- Manual Navigation JavaScript -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
      const carousel = document.getElementById("text-carousel");
      if (!carousel) return;
      const items = carousel.querySelectorAll("[data-carousel-item]");
      const prevButton = document.getElementById("carousel-prev");
      const nextButton = document.getElementById("carousel-next");
      let currentIndex = 0;
      const totalSlides = items.length;

      function showSlide(index: number) {
          items.forEach((item, i) => {
              item.classList.add("hidden");
              item.classList.remove("opacity-100");
              item.classList.add("opacity-0");
          });

          items[index].classList.remove("hidden");
          items[index].classList.add("opacity-100");
          items[index].classList.remove("opacity-0");
      }

      // Manual Navigation Buttons
      if (prevButton) {
          prevButton.addEventListener("click", () => {
              currentIndex = (currentIndex - 1 + totalSlides) % totalSlides; // Loop back to last
              showSlide(currentIndex);
          });
      }

      if (nextButton) {
          nextButton.addEventListener("click", () => {
              currentIndex = (currentIndex + 1) % totalSlides; // Loop back to first
              showSlide(currentIndex);
          });
      }

      showSlide(currentIndex); // Show first slide initially
  });
</script>
